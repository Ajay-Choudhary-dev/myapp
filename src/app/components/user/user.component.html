<div>
  <h2>User Management</h2>

  <!-- Loading state -->
  @if (loading) {
    <div>Loading...</div>
  }

  <!-- Form to add user -->
  <!-- <form (submit)="addUser()"
  style="max-width: 400px; margin: auto; padding: 20px; border: 1px solid #ccc; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);">
  <div style="margin-bottom: 15px;">
    <label for="id" style="display: block; margin-bottom: 5px;">ID</label>
    <input type="text" [(ngModel)]="newUser.id" placeholder="ID" name="id" required
      style="width: 100%; padding: 8px; box-sizing: border-box;">
  </div>
  <div style="margin-bottom: 15px;">
    <label for="FIRST_NAME" style="display: block; margin-bottom: 5px;">First Name</label>
    <input type="text" [(ngModel)]="newUser.FIRST_NAME" placeholder="First Name" name="FIRST_NAME" required
      style="width: 100%; padding: 8px; box-sizing: border-box;">
  </div>
  <div style="margin-bottom: 15px;">
    <label for="LAST_NAME" style="display: block; margin-bottom: 5px;">Last Name</label>
    <input type="text" [(ngModel)]="newUser.LAST_NAME" placeholder="Last Name" name="LAST_NAME" required
      style="width: 100%; padding: 8px; box-sizing: border-box;">
  </div>
  <div style="margin-bottom: 15px;">
    <label for="SALARY" style="display: block; margin-bottom: 5px;">Salary</label>
    <input type="text" [(ngModel)]="newUser.SALARY" placeholder="Salary" name="SALARY" required
      style="width: 100%; padding: 8px; box-sizing: border-box;">
  </div>
  <div style="margin-bottom: 15px;">
    <label for="EMAIL" style="display: block; margin-bottom: 5px;">Email</label>
    <input type="email" [(ngModel)]="newUser.EMAIL" placeholder="Email" name="EMAIL" required
      style="width: 100%; padding: 8px; box-sizing: border-box;">
  </div>
  <button type="submit"
    style="width: 100%; padding: 10px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">Add
  User</button>
</form> -->

<button (click)="showForm = !showForm"
  style="margin: 20px; padding: 10px; background-color: #007BFF; color: white; border: none; border-radius: 5px; cursor: pointer;">
  Add User
</button>

@if (showForm) {
  <div>
    <form (submit)="addUser()"
      style="max-width: 400px; margin: auto; padding: 20px; border: 1px solid #ccc; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);">
      <div style="margin-bottom: 15px;">
        <label for="id" style="display: block; margin-bottom: 5px;">ID</label>
        <input type="text" [(ngModel)]="newUser.id" placeholder="ID" name="id" required
          style="width: 100%; padding: 8px; box-sizing: border-box;">
      </div>
      <div style="margin-bottom: 15px;">
        <label for="FIRST_NAME" style="display: block; margin-bottom: 5px;">First Name</label>
        <input type="text" [(ngModel)]="newUser.FIRST_NAME" placeholder="FIRST_NAME" name="FIRST_NAME" required
          style="width: 100%; padding: 8px; box-sizing: border-box;">
      </div>
      <div style="margin-bottom: 15px;">
        <label for="LAST_NAME" style="display: block; margin-bottom: 5px;">Last Name</label>
        <input type="text" [(ngModel)]="newUser.LAST_NAME" placeholder="LAST_NAME" name="LAST_NAME" required
          style="width: 100%; padding: 8px; box-sizing: border-box;">
      </div>
      <div style="margin-bottom: 15px;">
        <label for="SALARY" style="display: block; margin-bottom: 5px;">Salary</label>
        <input type="text" [(ngModel)]="newUser.SALARY" placeholder="SALARY" name="SALARY" required
          style="width: 100%; padding: 8px; box-sizing: border-box;">
      </div>
      <div style="margin-bottom: 15px;">
        <label for="EMAIL" style="display: block; margin-bottom: 5px;">Email</label>
        <input type="email" [(ngModel)]="newUser.EMAIL" placeholder="EMAIL" name="EMAIL" required
          style="width: 100%; padding: 8px; box-sizing: border-box;">
      </div>
      <button type="submit"
        style="width: 100%; padding: 10px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
        Add User
      </button>
    </form>
  </div>
}


<!-- Table to display users -->
<table class="table table-bordered table-hover">
  <thead class="table-bordered">
    <tr>
      <th>ID</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Email</th>
      <th (click)="sortData('SALARY')">Salary</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    @for (user of users | paginate: { itemsPerPage: 4, currentPage: page } ; track user) {
      <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.FIRST_NAME }}</td>
        <td>{{ user.LAST_NAME }}</td>
        <td>{{user.EMAIL}}</td>
        <td>{{user.SALARY}}</td>
        <td>
          <button (click)="deleteUser(user.id)">Delete</button>
        </td>
      </tr>
    }
  </tbody>
</table>
<pagination-controls (pageChange)="page = $event" class="pagination justify-content-end"></pagination-controls>
</div>